# dbms
Программу выполнил Ильин Андрей ИУ4-22Б. Работает в Microsoft Visual Studio. Сложность 1. Вариант 4 Принимает на вход файл books.csv
Работает с русской раскладкой, принимает на вход формат: 1234567890;Андрей Ильин;Программирование на С;100;53
Цикл while (menu1 == 0) отвечает за работу меню программы (будет работать бесконечно, пока мы сами не сохраним файл и выйдем). 56 строка
69 - 70 строка считывание номера isbn , если isbn > 0, то продолжается дальнейшее считывание строчки, иначе, чтение файла прекращается.
Почему > 0? Потому что, когда мы резервируем память в 50 строке struct book library[H]; на H мест, изначально все isbn равны большому отрицательному числу(мусору),
а так как isbn в базе данных библиотеки всегда > 0, то я сделал такое условие.
Для удобства, я сделал запись в массив с 1-ой ячейки (то есть, 4-я строка будет равна 4-й ячейки массива, а не 3-й).
Так же я сделал анимацию командной строки для удобства работы и красоты (задержка анимации Sleep() и очистка консоли system("cls"))
Считывание и запись переменных типа string, я сделал через цикл с временной переменной, тк столкнулся с проблемой, что при встрече пробела считывание прерывается.
См. пример такого цикла 72-81 строка. (дальше такой цикл будет использоваться по ходу всей программы).
В 111 строке идет scanf с выбором действий и проверка на корректность введенных данных. (113-118 строки)
Далее через switch, я реализовал выбор функции.
1- добавить книгу
2- удалить книгу
3- сохранить бэкап
4- загрузить бэкап
5- поиск автора
6- сохранить и выйти
Начнем по порядку:
1) открываем файл для записи и проверяем, существует ли уже книга с таким isbn (121-142 строки). Далее вводим данные и с помощью цикла перезаписываем файл.167-169 строки
2) открываем файл для записи и проверяем, существует ли уже книга с таким isbn (180-196 строки). Далее до нужной строки, мы перезаписываем файл (199-202 строки).
А начиная от строки, которую нужно удалить, я сделал копирование значений следущего файла в предыдущий (a[i] = a[i+1]), что и происходит в  цикле на 203-210 строках.
Но я столкнулся с проблемой, две последний строчки в памяти массивы оказывались одинаковыми, поэтому я присваиваю isbn последней строчки значение 0 (212 строка), чтобы потом,
при считывании файл, эта строка не прошла условие на 69-70 строке. Таким образом эта ячейка остается лежать в памяти, но нигде не задействуется, а если после удаления добавить
новую книгу, то все данные перезапишутся в последнюю ячейку (где сейчас был isbn = 0) и все вернется на круги своя.
3) в строках 219-224 мы получаем время системы, и тк в нем содержится символ ":", а имя файла не может содержать его, то я заменил в цикле (225-229 строки) символы ":" на "_".
в 230 строке я прибавляю к имени нашего бэкапа расширение файла .csv, и затем открываю его и записываю все данные в бэкап. Выводиться сообщение на экран, что бэкап создан 
успешно (231-236 строки).
4) В строках 243-250 мы вводим название файла, который нужно загрузить (обязательно в конце надо писать разрешение! Пример: abcd.csv).  В строке 251 я меняю переменную, которая
отвечает за то, какой файл нужно считать, и в строках 254-256 я обнуляю все номера isbn(тк они находятся в памяти, а мы загружаем бэкап).
5) Вводим название автора, которого мы хотим найти в 263-271 строках, и затем просто пробегаемся по всему массиву, ища совпадения и выводя их на экран (276-280 строки).
Если совпадений не найдено, то нам выведет сообщение об этом 282-285 строки. Далее, чтобы выйти обратно в меню, необходимо ввести 0 (строки 287-297).
6) Просто перезаписываем файл и выходим из программы.
